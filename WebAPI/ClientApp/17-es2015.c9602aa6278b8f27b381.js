(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{cO6r:function(n,e,t){"use strict";t.r(e),t.d(e,"RolesModule",function(){return w});var i=t("3Pt+"),a=t("HFJ6"),o=t("fXoL"),s=t("dEAy"),r=t("dihp"),c=t("QLLi"),l=t("ocnv"),u=t("B+r4"),d=t("PTRe"),b=t("OzZK"),h=t("RwU8"),z=t("C2AL"),p=t("FwiY");function m(n,e){if(1&n){const n=o.Wb();o.Vb(0,"div"),o.Vb(1,"button",8),o.cc("click",function(){return o.vc(n),o.fc().destroyModal()}),o.Qb(2,"i",9),o.Fc(3,"H\u1ee7y "),o.Ub(),o.Vb(4,"button",10),o.cc("click",function(){return o.vc(n),o.fc().saveChanges()}),o.Qb(5,"i",11),o.Fc(6,"L\u01b0u "),o.Ub(),o.Ub()}if(2&n){const n=o.fc();o.Bb(4),o.lc("nzLoading",n.loadingSaveChanges)}}let g=(()=>{class n{constructor(n,e,t,i){this.fb=n,this.modal=e,this.roleService=t,this.messageService=i,this.roles=[]}onKeyPress(n){n.ctrlKey&&"Enter"===n.key&&this.saveChanges()}ngOnInit(){this.createForm(),this.roleForm.reset(),this.roleForm.patchValue(Object.assign({},this.data))}createForm(){this.roleForm=this.fb.group({id:[null],name:[null,[i.q.required]],description:[null,[i.q.required]],position:[null],createdBy:[null],createdDate:[null],status:[null]})}saveChanges(){if(this.loadingSaveChanges=!0,this.roleForm.invalid){for(const n in this.roleForm.controls)this.roleForm.controls[n].markAsDirty(),this.roleForm.controls[n].updateValueAndValidity();return void(this.loadingSaveChanges=!1)}const n=this.roleForm.getRawValue();this.isAddNew?this.roleService.create(n).subscribe(n=>{n&&(this.messageService.success(a.a.CREATED_OK_MSG),this.loadingSaveChanges=!1,this.modal.destroy(!0)),this.loadingSaveChanges=!1},n=>{this.loadingSaveChanges=!1}):this.roleService.update(n).subscribe(n=>{n&&(this.messageService.success(a.a.UPDATED_OK_MSG),this.loadingSaveChanges=!1,this.modal.destroy(!0)),this.loadingSaveChanges=!1},n=>{this.loadingSaveChanges=!1})}destroyModal(){this.modal.destroy(!1)}}return n.\u0275fac=function(e){return new(e||n)(o.Pb(i.e),o.Pb(s.c),o.Pb(r.a),o.Pb(c.a))},n.\u0275cmp=o.Jb({type:n,selectors:[["app-role-add-edit-modal"]],hostBindings:function(n,e){1&n&&o.cc("keydown",function(n){return e.onKeyPress(n)},!1,o.uc)},inputs:{data:"data",isAddNew:"isAddNew"},decls:12,vars:9,consts:[["nz-form","","autocomplete","off",3,"formGroup"],["nzRequired","","nzFor","name",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp t\xean.",3,"nzSm","nzXs"],["type","text","nz-input","","formControlName","name","id","name"],["nzRequired","","nzFor","description",3,"nzSm","nzXs"],["nzErrorTip","Vui l\xf2ng nh\u1eadp m\xf4 t\u1ea3.",3,"nzSm","nzXs"],["type","text","nz-input","","formControlName","description","id","description"],[4,"nzModalFooter"],["nz-button","","nzType","default",3,"click"],["nz-icon","","nzType","close","nzTheme","outline"],["nz-button","","nzType","primary",3,"nzLoading","click"],["nz-icon","","nzType","save","nzTheme","outline"]],template:function(n,e){1&n&&(o.Vb(0,"form",0),o.Vb(1,"nz-form-item"),o.Vb(2,"nz-form-label",1),o.Fc(3,"T\xean"),o.Ub(),o.Vb(4,"nz-form-control",2),o.Qb(5,"input",3),o.Ub(),o.Ub(),o.Vb(6,"nz-form-item"),o.Vb(7,"nz-form-label",4),o.Fc(8,"M\xf4 t\u1ea3"),o.Ub(),o.Vb(9,"nz-form-control",5),o.Qb(10,"input",6),o.Ub(),o.Ub(),o.Ub(),o.Dc(11,m,7,1,"div",7)),2&n&&(o.lc("formGroup",e.roleForm),o.Bb(2),o.lc("nzSm",7)("nzXs",24),o.Bb(2),o.lc("nzSm",17)("nzXs",24),o.Bb(3),o.lc("nzSm",7)("nzXs",24),o.Bb(2),o.lc("nzSm",17)("nzXs",24))},directives:[i.r,i.m,l.b,i.h,u.c,l.c,u.a,l.d,l.a,d.a,i.d,i.l,i.g,s.a,b.a,h.a,z.a,p.b],styles:[""]}),n})();var f=t("tyNb"),v=t("5+WD"),y=t("y6yg"),S=t("Nqz0"),P=t("rMZv"),D=t("ofXK"),V=t("Q8cG");function k(n,e){if(1&n){const n=o.Wb();o.Vb(0,"button",12),o.cc("click",function(){o.vc(n);const e=o.fc(),t=o.sc(4);return e.search(t.value)}),o.Qb(1,"i",13),o.Ub()}}function C(n,e){if(1&n){const n=o.Wb();o.Vb(0,"tr",14),o.cc("contextmenu",function(e){o.vc(n);const t=o.sc(6);return o.fc().contextMenu(e,t)})("dblclick",function(){o.vc(n);const t=e.$implicit;return o.fc().update(t)}),o.Vb(1,"td"),o.Fc(2),o.Ub(),o.Vb(3,"td"),o.Fc(4),o.Ub(),o.Vb(5,"nz-dropdown-menu",null,15),o.Vb(7,"ul",16),o.Vb(8,"li",17),o.cc("click",function(){o.vc(n);const t=e.$implicit;return o.fc().update(t)}),o.Qb(9,"i",18),o.Fc(10,"Edit "),o.Ub(),o.Vb(11,"li",17),o.cc("click",function(){o.vc(n);const t=e.$implicit;return o.fc().delete(t.id)}),o.Qb(12,"i",19),o.Fc(13,"Delete "),o.Ub(),o.Ub(),o.Ub(),o.Ub()}if(2&n){const n=e.$implicit;o.Bb(2),o.Gc(null==n?null:n.name),o.Bb(2),o.Gc(null==n?null:n.description)}}let T=(()=>{class n{constructor(n,e,t,i){this.modalService=n,this.nzContextMenuService=e,this.roleService=t,this.messageService=i,this.listOfData=[],this.loading=!0,this.pagination={},this.pagingParams={keyword:"",sortKey:"",sortValue:"",searchKey:"",searchValue:""}}ngOnInit(){this.loadData()}loadData(n=!1){n&&(this.pagination.currentPage=1),this.loading=!0,this.roleService.getAllPaging(this.pagination.currentPage||1,this.pagination.itemsPerPage||y.a.PAGE_SIZE,this.pagingParams).subscribe(n=>{this.loading=!1,this.pagination=n.pagination,this.listOfData=n.result,console.log(this.listOfData),0===this.listOfData.length&&1!==this.pagination.currentPage&&(this.pagination.currentPage-=1,this.loadData())})}create(){this.modalService.create({nzTitle:"Th\xeam m\u1edbi vai tr\xf2",nzContent:g,nzStyle:{top:y.a.MODAL_TOP},nzBodyStyle:{padding:y.a.MODAL_BODY_PADDING},nzMaskClosable:!1,nzClosable:!0,nzComponentParams:{data:{},isAddNew:!0}}).afterClose.subscribe(n=>{n&&this.loadData()})}update(n){this.roleService.getById(n.id).subscribe(n=>{this.modalService.create({nzTitle:"C\u1eadp nh\u1eadt vai tr\xf2",nzContent:g,nzStyle:{top:y.a.MODAL_TOP},nzBodyStyle:{padding:y.a.MODAL_BODY_PADDING},nzMaskClosable:!1,nzClosable:!0,nzComponentParams:{data:n,isAddNew:!1}}).afterClose.subscribe(n=>{n&&this.loadData()})})}delete(n){this.messageService.confirm(a.a.CONFIRM_DELETE_MSG,()=>{this.roleService.delete(n).subscribe(n=>{n&&(this.messageService.success(a.a.DELETED_OK_MSG),this.loadData())})},"danger")}onQueryParamsChange(n){const{pageSize:e,pageIndex:t,sort:i}=n,a=i.find(n=>null!==n.value);this.pagingParams.sortKey=a&&a.key||"",this.pagingParams.sortValue=a&&a.value||"",this.pagination.currentPage=t,this.pagination.itemsPerPage=e,console.log("a")}search(n){this.pagingParams.keyword=n,this.loadData(!0)}contextMenu(n,e){this.nzContextMenuService.create(n,e)}drop(n){Object(v.d)(this.listOfData,n.previousIndex,n.currentIndex),this.roleService.ChangePosition(this.listOfData).subscribe(n=>{n&&this.messageService.success(a.a.UPDATE_POSITION_OK)})}}return n.\u0275fac=function(e){return new(e||n)(o.Pb(s.d),o.Pb(S.a),o.Pb(r.a),o.Pb(c.a))},n.\u0275cmp=o.Jb({type:n,selectors:[["app-roles"]],decls:20,vars:9,consts:[["nz-row","",1,"table-actions"],["nz-col","","nzXs","24","nzSm","24","nzMd","12","nzLg","12","nzXl","12"],["nzSearch","",3,"nzAddOnAfter"],["type","text","nz-input","","placeholder","T\xecm ki\u1ebfm...",3,"keyup.enter"],["keyword",""],["suffixIconButton",""],["nz-col","","nzXs","24","nzSm","24","nzMd","12","nzLg","12","nzXl","12",1,"text-right"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],["nzShowSizeChanger","","nzBordered","","nzSize","small",3,"nzData","nzFrontPagination","nzShowQuickJumper","nzLoading","nzTotal","nzPageSize","nzPageIndex","nzQueryParams"],["cdkDropList","",1,"cursor-row",3,"cdkDropListDropped"],["cdkDrag","",3,"contextmenu","dblclick",4,"ngFor","ngForOf"],["nz-button","","nzType","primary","nzSearch","",3,"click"],["nz-icon","","nzType","search"],["cdkDrag","",3,"contextmenu","dblclick"],["menu","nzDropdownMenu"],["nz-menu",""],["nz-menu-item","",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(n,e){if(1&n){const n=o.Wb();o.Vb(0,"div",0),o.Vb(1,"div",1),o.Vb(2,"nz-input-group",2),o.Vb(3,"input",3,4),o.cc("keyup.enter",function(){o.vc(n);const t=o.sc(4);return e.search(t.value)}),o.Ub(),o.Ub(),o.Dc(5,k,2,0,"ng-template",null,5,o.Ec),o.Ub(),o.Vb(7,"div",6),o.Vb(8,"button",7),o.cc("click",function(){return e.create()}),o.Qb(9,"i",8),o.Fc(10," Th\xeam m\u1edbi "),o.Ub(),o.Ub(),o.Ub(),o.Vb(11,"nz-table",9),o.cc("nzQueryParams",function(n){return e.onQueryParamsChange(n)}),o.Vb(12,"thead"),o.Vb(13,"tr"),o.Vb(14,"th"),o.Fc(15,"Name"),o.Ub(),o.Vb(16,"th"),o.Fc(17,"Description"),o.Ub(),o.Ub(),o.Ub(),o.Vb(18,"tbody",10),o.cc("cdkDropListDropped",function(n){return e.drop(n)}),o.Dc(19,C,14,2,"tr",11),o.Ub(),o.Ub()}if(2&n){const n=o.sc(6);o.Bb(2),o.lc("nzAddOnAfter",n),o.Bb(9),o.lc("nzData",e.listOfData)("nzFrontPagination",!1)("nzShowQuickJumper",(null==e.pagination?null:e.pagination.totalPages)>1)("nzLoading",e.loading)("nzTotal",null==e.pagination?null:e.pagination.totalItems)("nzPageSize",null==e.pagination?null:e.pagination.itemsPerPage)("nzPageIndex",null==e.pagination?null:e.pagination.currentPage),o.Bb(8),o.lc("ngForOf",e.listOfData)}},directives:[u.c,u.a,z.a,d.b,d.a,b.a,h.a,p.b,P.c,P.g,P.h,P.b,P.f,P.e,v.b,D.l,v.a,S.d,V.c,V.e],styles:[""]}),n})();const U=[{path:"",component:T,data:{breadcrumb:"Vai tr\xf2"}}];let F=(()=>{class n{}return n.components=[T],n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.Nb({type:n}),n.\u0275inj=o.Mb({imports:[[f.i.forChild(U)],f.i]}),n})();var O=t("UKGz");let w=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.Nb({type:n}),n.\u0275inj=o.Mb({imports:[[O.a,F,v.c]]}),n})()}}]);